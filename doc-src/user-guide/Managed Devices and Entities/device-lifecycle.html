<div class="documentation-content">

<div class="wiki-content" id="main-content">
    <p>When does the MSActivator accesses the managed devices for monitoring, asset management or configuration management ?</p>
    <h1 id="DeviceLifecycle-AccessOverview"><span class="inline-comment-marker" data-ref="00f70175-9282-45f6-a52b-bae2215b7747">Access Overview</span></h1>
    <div class="table-wrap">
        <table class="wrapped relative-table confluenceTable tablesorter tablesorter-default stickyTableHeaders" role="grid" style="width: 100%; padding: 0px;">
            <colgroup>
                <col style="width: 11.9449%;"/>
                <col style="width: 14.9114%;"/>
                <col style="width: 9.29817%;"/>
                <col style="width: 6.55592%;"/>
                <col style="width: 12.6038%;"/>
                <col style="width: 44.6858%;"/>
            </colgroup>
            <thead class="tableFloatingHeaderOriginal" style="position: static; margin-top: 0px; left: 581px; z-index: 3; width: 810px; top: 92px;">
                <tr class="tablesorter-headerRow" role="row">
                    <th aria-disabled="false" aria-label=": No sort applied, activate to apply an ascending sort" aria-sort="none" class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted" data-column="0" role="columnheader" scope="col" style="user-select: none; min-width: 8px; max-width: none;" tabindex="0" unselectable="on">
                        <div class="tablesorter-header-inner"></div>
                    </th>
                    <th aria-disabled="false" aria-label="Protocol: No sort applied, activate to apply an ascending sort" aria-sort="none" class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted" data-column="1" role="columnheader" scope="col" style="user-select: none; min-width: 8px; max-width: none;" tabindex="0" unselectable="on">
                        <div class="tablesorter-header-inner">Protocol</div>
                    </th>
                    <th aria-disabled="false" aria-label="Read/Write/Listen: No sort applied, activate to apply an ascending sort" aria-sort="none" class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted" data-column="2" role="columnheader" scope="col" style="user-select: none; min-width: 8px; max-width: none;" tabindex="0" unselectable="on">
                        <div class="tablesorter-header-inner">Read/Write/Listen</div>
                    </th>
                    <th aria-disabled="false" aria-label="Period: No sort applied, activate to apply an ascending sort" aria-sort="none" class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted" colspan="1" data-column="3" role="columnheader" scope="col" style="user-select: none; min-width: 8px; max-width: none;" tabindex="0" unselectable="on">
                        <div class="tablesorter-header-inner">Period</div>
                    </th>
                    <th aria-disabled="false" aria-label="Trigger*: No sort applied, activate to apply an ascending sort" aria-sort="none" class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted" colspan="1" data-column="4" role="columnheader" scope="col" style="user-select: none; min-width: 8px; max-width: none;" tabindex="0" unselectable="on">
                        <div class="tablesorter-header-inner">Trigger*</div>
                    </th>
                    <th aria-disabled="false" aria-label="Comment: No sort applied, activate to apply an ascending sort" aria-sort="none" class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted" colspan="1" data-column="5" role="columnheader" scope="col" style="user-select: none; min-width: 8px; max-width: none;" tabindex="0" unselectable="on">
                        <div class="tablesorter-header-inner">Comment</div>
                    </th>
                </tr>
            </thead>
            <thead class="tableFloatingHeader" style="display: none;">
                <tr class="tablesorter-headerRow" role="row">
                    <th aria-disabled="false" aria-label=": No sort applied, activate to apply an ascending sort" aria-sort="none" class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted" data-column="0" role="columnheader" scope="col" style="user-select: none;" tabindex="0" unselectable="on">
                        <div class="tablesorter-header-inner"></div>
                    </th>
                    <th aria-disabled="false" aria-label="Protocol: No sort applied, activate to apply an ascending sort" aria-sort="none" class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted" data-column="1" role="columnheader" scope="col" style="user-select: none;" tabindex="0" unselectable="on">
                        <div class="tablesorter-header-inner">Protocol</div>
                    </th>
                    <th aria-disabled="false" aria-label="Read/Write/Listen: No sort applied, activate to apply an ascending sort" aria-sort="none" class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted" data-column="2" role="columnheader" scope="col" style="user-select: none;" tabindex="0" unselectable="on">
                        <div class="tablesorter-header-inner">Read/Write/Listen</div>
                    </th>
                    <th aria-disabled="false" aria-label="Period: No sort applied, activate to apply an ascending sort" aria-sort="none" class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted" colspan="1" data-column="3" role="columnheader" scope="col" style="user-select: none;" tabindex="0" unselectable="on">
                        <div class="tablesorter-header-inner">Period</div>
                    </th>
                    <th aria-disabled="false" aria-label="Trigger*: No sort applied, activate to apply an ascending sort" aria-sort="none" class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted" colspan="1" data-column="4" role="columnheader" scope="col" style="user-select: none;" tabindex="0" unselectable="on">
                        <div class="tablesorter-header-inner">Trigger*</div>
                    </th>
                    <th aria-disabled="false" aria-label="Comment: No sort applied, activate to apply an ascending sort" aria-sort="none" class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted" colspan="1" data-column="5" role="columnheader" scope="col" style="user-select: none;" tabindex="0" unselectable="on">
                        <div class="tablesorter-header-inner">Comment</div>
                    </th>
                </tr>
            </thead>
            <tbody aria-live="polite" aria-relevant="all">
                <tr role="row">
                    <td class="highlight-blue confluenceTd" data-highlight-colour="blue">Monitoring</td>
                    <td class="highlight-blue confluenceTd" data-highlight-colour="blue"></td>
                    <td class="highlight-blue confluenceTd" data-highlight-colour="blue"></td>
                    <td class="highlight-blue confluenceTd" colspan="1" data-highlight-colour="blue"></td>
                    <td class="highlight-blue confluenceTd" colspan="1" data-highlight-colour="blue"></td>
                    <td class="highlight-blue confluenceTd" colspan="1" data-highlight-colour="blue"></td>
                </tr>
                <tr role="row">
                    <td class="confluenceTd">Device status</td>
                    <td class="confluenceTd">ICMP</td>
                    <td class="confluenceTd">R</td>
                    <td class="confluenceTd" colspan="1">1 min.</td>
                    <td class="confluenceTd" colspan="1">auto</td>
                    <td class="confluenceTd" colspan="1"></td>
                </tr>
                <tr role="row">
                    <td class="confluenceTd">Monitoring Profile</td>
                    <td class="confluenceTd">UDP/161</td>
                    <td class="confluenceTd">R</td>
                    <td class="confluenceTd" colspan="1">1 min.</td>
                    <td class="confluenceTd" colspan="1">auto</td>
                    <td class="confluenceTd" colspan="1">Port and frequency can be customised.</td>
                </tr>
                <tr role="row">
                    <td class="confluenceTd" colspan="1">SNMP Trap</td>
                    <td class="confluenceTd" colspan="1">UDP/162</td>
                    <td class="confluenceTd" colspan="1">L</td>
                    <td class="confluenceTd" colspan="1"></td>
                    <td class="confluenceTd" colspan="1">auto</td>
                    <td class="confluenceTd" colspan="1"></td>
                </tr>
                <tr role="row">
                    <td class="confluenceTd">Log Analytic</td>
                    <td class="confluenceTd">UDP/514</td>
                    <td class="confluenceTd">L</td>
                    <td class="confluenceTd" colspan="1"></td>
                    <td class="confluenceTd" colspan="1">auto</td>
                    <td class="confluenceTd" colspan="1"></td>
                </tr>
                <tr role="row">
                    <td class="confluenceTd" colspan="1">Asset</td>
                    <td class="confluenceTd" colspan="1">
                        <p>TCP/22</p>
                        <p>TCP/80</p>
                        <p>TCP/443</p>any other protocol to access the managed devices
                    </td>
                    <td class="confluenceTd" colspan="1">R</td>
                    <td class="confluenceTd" colspan="1">24 hour</td>
                    <td class="confluenceTd" colspan="1">auto/manual</td>
                    <td class="confluenceTd" colspan="1">
                        <p>This depends on the managed devices and its adapter, usual cases are either remote CLI command call with SSH or REST API.</p>
                        <p>Can be triggered manually with the SecEngine command FORCEASSET</p>
                    </td>
                </tr>
                <tr role="row">
                    <td class="highlight-blue confluenceTd" colspan="1" data-highlight-colour="blue">Configuration</td>
                    <td class="highlight-blue confluenceTd" colspan="1" data-highlight-colour="blue"></td>
                    <td class="highlight-blue confluenceTd" colspan="1" data-highlight-colour="blue"></td>
                    <td class="highlight-blue confluenceTd" colspan="1" data-highlight-colour="blue"></td>
                    <td class="highlight-blue confluenceTd" colspan="1" data-highlight-colour="blue"></td>
                    <td class="highlight-blue confluenceTd" colspan="1" data-highlight-colour="blue"></td>
                </tr>
                <tr role="row">
                    <td class="confluenceTd" colspan="1">
                        <p>Initial provisioning</p>
                    </td>
                    <td class="confluenceTd" colspan="1">
                        <p>TCP/22</p>
                        <p>TCP/80</p>
                        <p>TCP/443</p>
                        <p>other protocol to access the managed devices</p>
                    </td>
                    <td class="confluenceTd" colspan="1">W/R</td>
                    <td class="confluenceTd" colspan="1"></td>
                    <td class="confluenceTd" colspan="1"></td>
                    <td class="confluenceTd" colspan="1">
                        <p>This depends on the managed devices and its adapter, usual case are either remote CLI command call with SSH or REST API.</p>
                        <p>Port can be customised to support managed entities behind NAT (PAT is needed).</p>
                        <p>It is possible to support a fall-back mechanism based on TFTP and Telnet when secure connection fails or is not supported by the device (see below for details).</p>
                    </td>
                </tr>
                <tr role="row">
                    <td class="confluenceTd" colspan="1">
                        <p>Microservice</p>
                    </td>
                    <td class="confluenceTd" colspan="1">
                        <p>TCP/22</p>
                        <p>TCP/80</p>
                        <p>TCP/443</p>
                        <p>other protocol to access the managed devices</p>
                    </td>
                    <td class="confluenceTd" colspan="1">W/R</td>
                    <td class="confluenceTd" colspan="1"></td>
                    <td class="confluenceTd" colspan="1">manual</td>
                    <td class="confluenceTd" colspan="1">(same as above)</td>
                </tr>
                <tr role="row">
                    <td class="confluenceTd" colspan="1">
                        <p>Template</p>
                    </td>
                    <td class="confluenceTd" colspan="1">
                        <p>TCP/22</p>
                        <p>TCP/80</p>
                        <p>TCP/443</p>
                        <p>other protocol to access the managed devices</p>
                    </td>
                    <td class="confluenceTd" colspan="1">W/R</td>
                    <td class="confluenceTd" colspan="1"></td>
                    <td class="confluenceTd" colspan="1">manual/auto</td>
                    <td class="confluenceTd" colspan="1">
                        <p>(same as above)</p>
                        <p>The configuration update can be configured to be triggered automatically upon configuration change in MSActivator database.</p>
                    </td>
                </tr>
                <tr role="row">
                    <td class="confluenceTd" colspan="1">Change Management</td>
                    <td class="confluenceTd" colspan="1">
                        <p>TCP/22</p>
                        <p>TCP/80</p>
                        <p>TCP/443</p>other protocol to access the managed devices
                    </td>
                    <td class="confluenceTd" colspan="1">
                        <p>W (for configuration rollback)</p>
                        <p>R (for configuration backup)</p>
                    </td>
                    <td class="confluenceTd" colspan="1">24 hour</td>
                    <td class="confluenceTd" colspan="1">auto/manual</td>
                    <td class="confluenceTd" colspan="1">
                        <p>Global backup of all managed devices is executed every 24h.</p>
                        <p>Rollback action can only be triggered manual from UI or with API.</p>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="confluence-information-macro confluence-information-macro-information conf-macro output-block" data-hasbody="true" data-macro-name="info"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"><i aria-hidden="true" class="fa fa-info"></i></span>
        <div class="confluence-information-macro-body"> * info on what triggers an action: automated/scheduled and/or manual</div>
    </div>
    <p></p>
    <h1 id="DeviceLifecycle-Monitoring">Monitoring</h1>
    <h2 id="DeviceLifecycle-DeviceStatus">Device Status</h2>
    <p>MSA monitoring engine checks for ICMP reachability every minute. The status of a managed entity is graphically represented by 4 colours: blue, green, yellow and red and displayed on the user portal</p>
    <p><a class="image-popup-fit-width" href="">
        <img alt="Image" height="59" src="images/image2019-11-13_14-34-23.png" width="800"/>
      </a></p>
    <p><span style="color: rgb(51,102,255);">NOT ACTIVE</span> :  the managed entity is created in the MSActivator database but not yet activated with initial provisioning. The MSActivator is not monitoring or managing this device yet</p>
    <div class="confluence-information-macro confluence-information-macro-information conf-macro output-block" data-hasbody="true" data-macro-name="info">
        <p class="title">NOTE: once a managed entity is created it's immediately accounted for the MSActivator product license even if it's not activated</p>
        
    </div>
    <p><span style="color: rgb(51,153,102);">UP</span> : the managed entity  was activated and is currently monitored using ICMP</p>
    <p><span style="color: rgb(255,153,0);">CRITICAL</span> : the managed entity  is monitored and at least one ICMP request failed but at most 5 ICMP requests failed</p>
    <p><span style="color: rgb(255,0,0);">DOWN</span> : There was 5 ICMP request failures in a row and the 6th one failed</p>
    <h3 id="DeviceLifecycle-IPUP/IPDOWNevents">IPUP/IPDOWN events</h3>
    <p>When a device status changes, the MSActivator will generate some internal events that can be used to configure some alarms.</p>
    <h4 id="DeviceLifecycle-Rulesforstatuschange">Rules for status change</h4>
    <p>When the status changes from <span style="color: rgb(0,128,0);">UP</span> or <span style="color: rgb(255,153,0);">CRITICAL</span> to <span style="color: rgb(255,0,0);">DOWN</span>, an event IPDOWN is generated.</p>
    <p>When the status changes from <span style="color: rgb(255,0,0);">DOWN</span> to <span style="color: rgb(0,128,0);">UP</span>, an event IPUP is generated.</p>
    <p>If a device is <span style="color: rgb(255,0,0);">DOWN</span> but a syslog is collected and detected to be coming from the device, an IPUP will be generated but the status will stay <span style="color: rgb(255,0,0);">DOWN.</span></p>
    <p></p>
    <p>These events will be stored in the Elasticsearch cluster and will be available for alarm management just like a regular syslog.</p>
    <p><a class="image-popup-fit-width" href="">
        <img alt="Image" src="images/image2019-11-14_12-0-58.png" width="800"/>
      </a></p>
    <h2 id="DeviceLifecycle-MonitoringProfile">Monitoring Profile</h2>
    <p>The <a href="../Assurance/monitoring-profile.adoc">monitoring profiles</a> are based on SNMP request to get the KPI values from the managed entities.</p>
    <p>When a monitoring profile is associated to a managed entity, the MSActivator monitoring engine (polld) will start polling for the KPI by sending an SNMP request to the managed entity and storing the result in a dedicated database.</p>
    <p>If the SNMP request fails, by default, no action will be taken, monitoring data will not be recorded and the graph will show an empty gray bar.</p>
    <h2 id="DeviceLifecycle-AssetManagement">Asset Management</h2>
    <p>The asset management module is in charge of maintaining the device <a href="../Managed Devices and Entities/device-history.adoc">asset history</a> up to date.</p>
    <p>The implementation of the asset management is vendor specific and therefore implemented in the adapter in a PHP script located in /opt/sms/bin/php/polld/ named &lt;DA Model&gt;_mgmt.php.</p>
    <p>When the managed entity  is activated, this script will be executed and is in charge of getting assets information about the managed entity such as it's firmware version, serial number, memory,...</p>
    <p>To get this information the MSActivator will connect to the managed entity  and read the information. Usually this is done with REST API or SSH/CLI, depending on the managed entity  capabilities.</p>
    <p>The asset management task is scheduled to run once a day for every managed device.</p>
    <p>It is possible to force the refresh of the asset with the SecEngine command FORCEASSET.</p>
    <div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;">
        <div class="codeContent panelContent pdl">
            <div>
                <div class="syntaxhighlighter sh-confluence nogutter java" id="highlighter_973896">
                    <div class="toolbar"><span><a class="toolbar_item command_help help" href="#">?</a></span></div>
                    <table border="0" cellpadding="0" cellspacing="0">
                        <tbody>
                            <tr>
                                <code class="code">
                                    <div class="container" title="Hint: double-click to select code">
                                        <div class="line number1 index0 alt2"><code class="java plain">POST /sms/verb/FORCEASSET/{deviceId}</code></div>
                                    </div>
                                </code>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;">
        <div class="codeContent panelContent pdl">
            <div>
                <div class="syntaxhighlighter sh-confluence nogutter java" id="highlighter_285275">
                    <div class="toolbar"><span><a class="toolbar_item command_help help" href="#">?</a></span></div>
                    <table border="0" cellpadding="0" cellspacing="0">
                        <tbody>
                            <tr>
                                <code class="code">
                                    <div class="container" title="Hint: double-click to select code">
                                        <div class="line number1 index0 alt2"><code class="java plain">example: </code></div>
                                        <div class="line number2 index1 alt1"><code class="java plain">curl -u ncroot:PASSWORD  -XPOST http:</code><code class="java comments">//127.0.0.1/ubi-api-rest/sms/verb/FORCEASSET/2127</code></div>
                                    </div>
                                </code>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <p>on a Fortigate firewall, the asset management daemon (polld) will connect on the device with SSH, use some CLI command to get the required info and store the information in the database</p>
    <div class="code panel pdl conf-macro output-block" data-hasbody="true" data-macro-name="code" style="border-width: 1px;">
        <div class="codeContent panelContent pdl">
            <div>
                <div class="syntaxhighlighter sh-confluence nogutter java" id="highlighter_100349">
                    <div class="toolbar"><span><a class="toolbar_item command_help help" href="#">?</a></span></div>
                    <table border="0" cellpadding="0" cellspacing="0">
                        <tbody>
                            <tr>
                                <code class="code">
                                    <div class="container" title="Hint: double-click to select code">
                                        <div class="line number1 index0 alt2"><code class="java value">2019</code><code class="java plain">/</code><code class="java value">11</code><code class="java plain">/</code><code class="java value">14</code><code class="java plain">:</code><code class="java value">10</code><code class="java plain">:</code><code class="java value">22</code><code class="java plain">:</code><code class="java value">06</code><code class="java plain">:(D):sms_polld:MSA2127:sd_poll_task:: RECEIVED: </code></div>
                                        <div class="line number2 index1 alt1"><code class="java value">2019</code><code class="java plain">/</code><code class="java value">11</code><code class="java plain">/</code><code class="java value">14</code><code class="java plain">:</code><code class="java value">10</code><code class="java plain">:</code><code class="java value">22</code><code class="java plain">:</code><code class="java value">06</code><code class="java plain">:(I):sms_polld:MSA2127:sd_poll_task::  firmware       [FortiGate-VM64-AWSONDEMAND v6.</code><code class="java value">0.6</code><code class="java plain">,build0272,</code><code class="java value">190716</code> <code class="java plain">(GA)]</code></div>
                                        <div class="line number3 index2 alt2"><code class="java value">2019</code><code class="java plain">/</code><code class="java value">11</code><code class="java plain">/</code><code class="java value">14</code><code class="java plain">:</code><code class="java value">10</code><code class="java plain">:</code><code class="java value">22</code><code class="java plain">:</code><code class="java value">06</code><code class="java plain">:(I):sms_polld:MSA2127:sd_poll_task::  model          [FortiGate-VM64-AWSONDEMAND]</code></div>
                                        <div class="line number4 index3 alt1"><code class="java value">2019</code><code class="java plain">/</code><code class="java value">11</code><code class="java plain">/</code><code class="java value">14</code><code class="java plain">:</code><code class="java value">10</code><code class="java plain">:</code><code class="java value">22</code><code class="java plain">:</code><code class="java value">06</code><code class="java plain">:(I):sms_polld:MSA2127:sd_poll_task::  serial         [FGTAWS00088ED20A]</code></div>
                                        <div class="line number5 index4 alt2"><code class="java value">2019</code><code class="java plain">/</code><code class="java value">11</code><code class="java plain">/</code><code class="java value">14</code><code class="java plain">:</code><code class="java value">10</code><code class="java plain">:</code><code class="java value">22</code><code class="java plain">:</code><code class="java value">06</code><code class="java plain">:(I):sms_polld:MSA2127:sd_poll_task::  cpu            [Intel(R) Xeon(R) Platinum 8124M CPU @ </code><code class="java value">3</code><code class="java plain">.00GHz]</code></div>
                                        <div class="line number6 index5 alt1"><code class="java value">2019</code><code class="java plain">/</code><code class="java value">11</code><code class="java plain">/</code><code class="java value">14</code><code class="java plain">:</code><code class="java value">10</code><code class="java plain">:</code><code class="java value">22</code><code class="java plain">:</code><code class="java value">06</code><code class="java plain">:(I):sms_polld:MSA2127:sd_poll_task::  ips_version    [</code><code class="java value">6.00741</code><code class="java plain">(</code><code class="java value">2015</code><code class="java plain">-</code><code class="java value">12</code><code class="java plain">-</code><code class="java value">01</code> <code class="java value">02</code><code class="java plain">:</code><code class="java value">30</code><code class="java plain">)]</code></div>
                                        <div class="line number7 index6 alt2"><code class="java value">2019</code><code class="java plain">/</code><code class="java value">11</code><code class="java plain">/</code><code class="java value">14</code><code class="java plain">:</code><code class="java value">10</code><code class="java plain">:</code><code class="java value">22</code><code class="java plain">:</code><code class="java value">06</code><code class="java plain">:(I):sms_polld:MSA2127:sd_poll_task::  av_version     [</code><code class="java value">1.00000</code><code class="java plain">(</code><code class="java value">2018</code><code class="java plain">-</code><code class="java value">04</code><code class="java plain">-</code><code class="java value">09</code> <code class="java value">18</code><code class="java plain">:</code><code class="java value">07</code><code class="java plain">)]</code></div>
                                        <div class="line number8 index7 alt1"><code class="java value">2019</code><code class="java plain">/</code><code class="java value">11</code><code class="java plain">/</code><code class="java value">14</code><code class="java plain">:</code><code class="java value">10</code><code class="java plain">:</code><code class="java value">22</code><code class="java plain">:</code><code class="java value">06</code><code class="java plain">:(D):sms_polld:MSA2127:sd_poll_task:: SENDCMD: [exit]</code></div>
                                    </div>
                                </code>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <p>This information is shown on the MSActivator UI</p>
    <p><a class="image-popup-fit-width" href="">
        <img alt="Image" src="images/image2019-11-14_11-27-50.png" width="800"/>
      </a></p>
    <p></p>
    <h2 id="DeviceLifecycle-LogAnalytic">Log Analytic</h2>
    <p>The <a href="../Assurance/log-analysis.adoc">log analytic</a> module is part of MSActivator assurance. The MSActivator can collect syslogs sent from a managed entity.</p>
    <p>The syslogs are collected by the SecEngine syslog collector (syslogd) on UDP/514</p>
    <h1 id="DeviceLifecycle-ConfigurationManagement">Configuration Management</h1>
    <h2 id="DeviceLifecycle-InitialProvisioning">Initial Provisioning</h2>
    <p>In order to activate a managed entity, the initial provisioning is a mandatory step.</p>
    <p>The initial provisioning is a multiple steps process where the MSActivator configuration engine will try to connect on the managed entity, push an optional initial configuration and backup the running configuration in it's configuration change management database.</p>
    <p>It is possible to trigger the <a href="../Getting Started/managed-devices.adoc">initial provisioning</a> with the API or the UI.</p>
    <h2 id="DeviceLifecycle-ConfigurationTemplates">Configuration Templates</h2>
    <p><a href="/documentation/configuration-template/">Configuration Templates</a> can be used to update a device configuration.</p>
    <p>By default, template based configuration has to be triggered manually (with the UI or API) but it is possible to configure a managed entity to activate the automated configuration update.</p>
    <p>If the automated configuration update is activated, any configuration related change on the managed device attributes (host name, management interface,... or any configuration variable) will trigger a configuration update.</p>
    <p><a class="image-popup-fit-width" href="">
        <img alt="Image" src="images/image2019-11-14_11-43-14.png" width="800"/>
      </a></p>
    <h2 id="DeviceLifecycle-Microservices">Microservices</h2>
    <p><a href="/documentation/microservices/">Microservice</a> can be designed to read and import a managed entity  configuration items or to create/update a managed entity  configuration item.</p>
    <h2 id="DeviceLifecycle-ConfigurationChangeManagement">Configuration Change Management</h2>
    <h3 id="DeviceLifecycle-Backup">Backup</h3>
    <p>The <a href="../Managed Devices and Entities/device-history.adoc">configuration change management module</a> will backup the running configuration of a managed entity each time the configuration is changed either by an initial provisioning or a configuration update.</p>
    <p>The module will also execute a daily backup of the configuration of all the managed entities registered and activated in the MSActivator. This is to ensure that manual configuration are also backed up and detected (it is possible to configure an alarm to get notified when a manual configuration occurs).</p>
    <p>The backup process is implemented in the device adapter.</p>
    <h3 id="DeviceLifecycle-Rollback">Rollback</h3>
    <p>The configuration change management module can also be used to rollback a managed entity configuration to a previous configuration. The MSActivator will use the selected configuration to replace the device running configuration. The rollback process is implemented in the device adapter.</p>
    <h1 id="DeviceLifecycle-AdditionalConsiderations">Additional Considerations</h1>
    <p>It is possible to use non-secure protocol such as TFTP or Telnet to manage devices.</p>
    <p>This is as per implemented in the device adapter and it is a design choice to use these protocol for device management.</p>
    <p>In most cases, these protocols are used as a fall back mechanism when the use of the default secure protocol fails. For instance, some device are initially configure to support Telnet only and the initial provisioning can use Telnet to activate SSH.</p>
    <p>When TFTP is used, the connection is always initiated by the device toward the MSA. The initiation of the connection is done by sending some CLI commands (or call some REST API) on the device.</p>
</div>

        </div>